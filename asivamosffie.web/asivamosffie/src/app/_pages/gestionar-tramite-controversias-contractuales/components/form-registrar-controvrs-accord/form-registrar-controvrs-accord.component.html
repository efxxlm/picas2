<form [formGroup]="addressForm" novalidate (ngSubmit)="onSubmit()">
  <mat-card class="shipping-card">
    <mat-card-header class="header-card">
      <mat-card-title class="header-card--text"> Registrar controversia </mat-card-title>
    </mat-card-header>
    <mat-card-content style="text-align: left">
      <div class="row">
        <div class="col-md-12">
          <div class="row">
            <div class="pr-1">
              <label
                class="label-left"
                for="tipoControversia"
                [class.color-secondaryColor]="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              >
                Tipo de controversia
              </label>
            </div>
            <div class="col">
              <mat-form-field class="select-width">
                <mat-select formControlName="tipoControversia" required>
                  <mat-option *ngFor="let contr of tipoControversiaArray" [value]="contr.value">
                    {{ contr.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <span class="icon-incompleto">
              <img
                class="icon-incompleto--img"
                src="assets/img/icon/incompleto.svg"
                alt="este campo es requerido"
                *ngIf="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              />
            </span>
          </div>
        </div>
      </div>
      <div
        class="row"
        *ngIf="
          addressForm.value.tipoControversia === '2' ||
          addressForm.value.tipoControversia === '3' ||
          addressForm.value.tipoControversia === '4'
        "
      >
        <div class="col-md-6" style="padding-left: 0">
          <div class="row">
            <div class="pr-1">
              <label
                class="label-left"
                for="fechaRadicadoSAC"
                [class.color-secondaryColor]="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              >
                Fecha de radicado en SAC
              </label>
            </div>
            <div class="col d-flex align-items-center">
              <mat-form-field class="example-full-width">
                <input
                  matInput
                  formControlName="fechaRadicadoSAC"
                  [matDatepicker]="pickerfechaRadicadoSAC"
                  readonly
                  (click)="pickerfechaRadicadoSAC.open()"
                  required
                />
                <mat-datepicker #pickerfechaRadicadoSAC></mat-datepicker>
              </mat-form-field>
              <button
                mat-button
                color="primary"
                type="button"
                (click)="pickerfechaRadicadoSAC.open()"
                class="btn-calendario"
              >
                <img src="assets/img/icon/calendarioCirculo.svg" alt="Abrir Calendario" />
              </button>
              <span class="icon-incompleto">
                <img
                  class="icon-incompleto--img"
                  src="assets/img/icon/incompleto.svg"
                  alt="este campo es requerido"
                  *ngIf="
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                      addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                  "
                />
              </span>
            </div>
          </div>
        </div>
      </div>
      <div
        class="row"
        *ngIf="
          addressForm.value.tipoControversia === '2' ||
          addressForm.value.tipoControversia === '3' ||
          addressForm.value.tipoControversia === '4'
        "
      >
        <div class="col-md-6" style="padding-left: 0">
          <div class="row">
            <div class="pr-1">
              <label
                class="label-left"
                for="numeroRadicadoSAC"
                [class.color-secondaryColor]="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              >
                Número de radicado en SAC
              </label>
            </div>
            <div class="col d-flex align-items-center">
              <mat-form-field class="full-width">
                <input
                  matInput
                  #numeroRadicadoSAC
                  type="text"
                  maxlength="10"
                  formControlName="numeroRadicadoSAC"
                  required
                />
              </mat-form-field>
              <span
                class="contador miles"
                [matTooltipPosition]="'above'"
                matTooltip="Campo alfanumérico"
                matTooltipClass="info-tooltip"
                *ngIf="addressForm.controls.numeroRadicadoSAC.value"
              >
                {{ 10 - textoLimpio(addressForm.controls.numeroRadicadoSAC.value) }}
              </span>
              <span
                class="contador miles"
                [matTooltipPosition]="'above'"
                matTooltip="Campo alfanumérico"
                matTooltipClass="info-tooltip"
                *ngIf="!addressForm.controls.numeroRadicadoSAC.value"
              >
                10
              </span>
              <span class="icon-incompleto">
                <img
                  class="icon-incompleto--img"
                  src="assets/img/icon/incompleto.svg"
                  alt="este campo es requerido"
                  *ngIf="
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                      addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                  "
                />
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="addressForm.value.tipoControversia === '1'">
        <div class="col-md-6" style="padding-left: 0">
          <div class="row">
            <div class="pr-1">
              <label
                class="label-left"
                for="fechaSolicitud"
                [class.color-secondaryColor]="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              >
                Fecha de solicitud
              </label>
            </div>
            <div class="col d-flex align-items-center">
              <mat-form-field class="example-full-width">
                <input
                  matInput
                  formControlName="fechaSolicitud"
                  [matDatepicker]="pickerFechaSolicitud"
                  readonly
                  (click)="pickerFechaSolicitud.open()"
                  required
                />
                <mat-datepicker #pickerFechaSolicitud></mat-datepicker>
              </mat-form-field>
              <button
                mat-button
                color="primary"
                type="button"
                (click)="pickerFechaSolicitud.open()"
                class="btn-calendario"
              >
                <img src="assets/img/icon/calendarioCirculo.svg" alt="Abrir Calendario" />
              </button>
              <span class="icon-incompleto">
                <img
                  class="icon-incompleto--img"
                  src="assets/img/icon/incompleto.svg"
                  alt="este campo es requerido"
                  *ngIf="
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                      addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                  "
                />
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="addressForm.value.tipoControversia !== null">
        <div class="col-md-6" style="padding-left: 0">
          <div class="row">
            <div class="pr-1">
              <label
                class="label-left"
                for="motivosSolicitud"
                [class.color-secondaryColor]="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              >
                Motivos de la solicitud
              </label>
            </div>
            <div class="col">
              <mat-form-field class="select-width">
                <mat-select formControlName="motivosSolicitud" required>
                  <mat-option *ngFor="let contr of motivosSolicitudArray" [value]="contr.value">
                    {{ contr.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <span class="icon-incompleto">
              <img
                class="icon-incompleto--img"
                src="assets/img/icon/incompleto.svg"
                alt="este campo es requerido"
                *ngIf="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              />
            </span>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="addressForm.value.tipoControversia === '1'">
        <div class="col-md-6" style="padding-left: 0">
          <div class="row">
            <div class="pr-1">
              <label
                class="label-left"
                for="fechaComitePretecnico"
                [class.color-secondaryColor]="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              >
                Fecha de Comité Pre-Técnico
              </label>
            </div>
            <div class="col d-flex align-items-center">
              <mat-form-field class="example-full-width">
                <input
                  matInput
                  formControlName="fechaComitePretecnico"
                  [matDatepicker]="pickerfechaComitePretecnico"
                  readonly
                  (click)="pickerfechaComitePretecnico.open()"
                  required
                />
                <mat-datepicker #pickerfechaComitePretecnico></mat-datepicker>
              </mat-form-field>
              <button
                mat-button
                color="primary"
                type="button"
                (click)="pickerfechaComitePretecnico.open()"
                class="btn-calendario"
              >
                <img src="assets/img/icon/calendarioCirculo.svg" alt="Abrir Calendario" />
              </button>
              <span class="icon-incompleto">
                <img
                  class="icon-incompleto--img"
                  src="assets/img/icon/incompleto.svg"
                  alt="este campo es requerido"
                  *ngIf="
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                      addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                  "
                />
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="addressForm.value.tipoControversia === '1'">
        <div class="col-md-12" style="padding-left: 0">
          <div class="row">
            <div class="pr-1">
              <label
                class="label-left"
                for="conclusionComitePretecnico"
                [class.color-secondaryColor]="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              >
                Conclusión del Comité Pre-técnico de acuerdo con la solicitud
              </label>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="addressForm.value.tipoControversia === '1'">
        <div class="col-md-12" style="padding-left: 0">
          <div>
            <div class="d-flex align-items-center">
              <div class="text-area-quill auxBox">
                <quill-editor
                  class="quill-editor-style"
                  [styles]="editorStyle"
                  [modules]="config"
                  required
                  (onContentChanged)="maxLength($event, 1000)"
                  formControlName="conclusionComitePretecnico"
                  [class.invalid]="
                    (addressForm.get('observaciones').invalid && addressForm.get('observaciones').touched) ||
                    (addressForm.get('observaciones').invalid && estaEditando)
                  "
                >
                </quill-editor>
              </div>
              <span class="contador miles" *ngIf="addressForm.controls.conclusionComitePretecnico.value">
                {{ 1000 - textoLimpio(addressForm.controls.conclusionComitePretecnico.value) }}
              </span>
              <span class="contador miles" *ngIf="!addressForm.controls.conclusionComitePretecnico.value"> 1000 </span>
              <span class="icon-incompleto">
                <img
                  class="icon-incompleto--img"
                  src="assets/img/icon/incompleto.svg"
                  alt="este campo es requerido"
                  *ngIf="
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                      addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                  "
                />
              </span>
            </div>
          </div>
        </div>
      </div>
      <div
        class="row"
        *ngIf="
          addressForm.value.tipoControversia === '2' ||
          addressForm.value.tipoControversia === '3' ||
          addressForm.value.tipoControversia === '4'
        "
      >
        <div class="col-md-12" style="padding-left: 0">
          <div class="row">
            <div class="pr-1">
              <label
                class="label-left"
                for="resumenJustificacionSolicitud"
                [class.color-secondaryColor]="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              >
                Resumen de la justificación de la solicitud
              </label>
            </div>
          </div>
        </div>
      </div>
      <div
        class="row"
        *ngIf="
          addressForm.value.tipoControversia === '2' ||
          addressForm.value.tipoControversia === '3' ||
          addressForm.value.tipoControversia === '4'
        "
      >
        <div class="col-md-12" style="padding-left: 0">
          <div>
            <div class="d-flex align-items-center">
              <div class="text-area-quill auxBox">
                <quill-editor
                  class="quill-editor-style"
                  [styles]="editorStyle"
                  [modules]="config"
                  required
                  (onContentChanged)="maxLength($event, 1000)"
                  formControlName="resumenJustificacionSolicitud"
                  [class.invalid]="
                    (addressForm.get('observaciones').invalid && addressForm.get('observaciones').touched) ||
                    (addressForm.get('observaciones').invalid && estaEditando)
                  "
                >
                </quill-editor>
              </div>
              <span class="contador miles" *ngIf="addressForm.controls.resumenJustificacionSolicitud.value">
                {{ 1000 - textoLimpio(addressForm.controls.resumenJustificacionSolicitud.value) }}
              </span>
              <span class="contador miles" *ngIf="!addressForm.controls.resumenJustificacionSolicitud.value">
                1000
              </span>
              <span class="icon-incompleto">
                <img
                  class="icon-incompleto--img"
                  src="assets/img/icon/incompleto.svg"
                  alt="este campo es requerido"
                  *ngIf="
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                      addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                    (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                  "
                />
              </span>
            </div>
          </div>
        </div>
      </div>
      <div class="row" *ngIf="addressForm.value.tipoControversia === '1'">
        <div class="col-md-6" style="padding-left: 0">
          <div class="row">
            <div class="pr-1">
              <label
                class="label-left"
                for="procedeSolicitud"
                [class.color-secondaryColor]="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              >
                ¿La solicitud procede?
              </label>
            </div>
            <div class="col">
              <mat-radio-group class="radioInput" formControlName="procedeSolicitud" required>
                <mat-radio-button [value]="true">Sí</mat-radio-button>
                <mat-radio-button [value]="false">No</mat-radio-button>
              </mat-radio-group>
              <span class="required-form-group">*</span>
            </div>
            <span class="icon-incompleto">
              <img
                class="icon-incompleto--img"
                src="assets/img/icon/incompleto.svg"
                alt="este campo es requerido"
                *ngIf="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              />
            </span>
          </div>
        </div>
      </div>
      <div
        class="row"
        *ngIf="addressForm.value.procedeSolicitud === true && addressForm.value.tipoControversia === '1'"
      >
        <div class="col-md-6" style="padding-left: 0">
          <div class="row">
            <div class="pr-1">
              <label
                class="label-left"
                for="requeridoComite"
                [class.color-secondaryColor]="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              >
                ¿Requiere comité técnico?
              </label>
            </div>
            <div class="col">
              <mat-radio-group class="radioInput" formControlName="requeridoComite" required>
                <mat-radio-button [value]="true">Sí</mat-radio-button>
                <mat-radio-button [value]="false">No</mat-radio-button>
              </mat-radio-group>
              <span class="required-form-group">*</span>
            </div>
            <span class="icon-incompleto">
              <img
                class="icon-incompleto--img"
                src="assets/img/icon/incompleto.svg"
                alt="este campo es requerido"
                *ngIf="
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid &&
                    addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').touched) ||
                  (addressForm.get('fechaActaInicioFUnoPreconstruccioooooooooooooooon').invalid && estaEditando)
                "
              />
            </span>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
  <div class="text-center mb-2em">
    <button mat-button color="warn" class="btn-guardar" type="submit">
      <img src="assets/img/icon/guardar.svg" alt="Regresar" />
    </button>
  </div>
</form>
