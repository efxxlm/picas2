<form [formGroup]="addressForm" novalidate (ngSubmit)="onSubmit()">
  <mat-card class="shipping-card">
    <mat-card-header class="header-card header-card--margin">
      <mat-card-title class="header-card--text"> Ficha de contrato </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="row">
        <div class="col-md-12">
          <div class="row">
            <div class="pr-1">
              <label
                class="label-left"
                for="numeroContrato"
                [class.color-secondaryColor]="
                  addressForm.get('numeroContrato').invalid && addressForm.get('numeroContrato').touched
                "
              >
                Número de contrato
              </label>
            </div>
            <div class="col d-flex">
              <mat-form-field
                class="full-width"
                [matTooltipPosition]="'above'"
                matTooltip="Búsqueda sugerida, ingrese al menos un carácter"
                matTooltipClass="info-tooltip"
              >
                <!-- <input matInput #llaveMen="matAutocompleteTrigger" type="text" maxlength="100" required [matAutocomplete]="auto" formControlName="numeroContrato" (ngModelChange)="getContratos($event)"> -->
                <input
                  matInput
                  #llaveMen="matAutocompleteTrigger"
                  type="text"
                  maxlength="100"
                  required
                  [matAutocomplete]="auto"
                  formControlName="numeroContrato"
                />
                <mat-autocomplete #auto="matAutocomplete">
                  <!-- (click)="seleccionAutocomplete(contrato)" -->
                  <mat-option *ngFor="let contrato of filterContratosArray | async" [value]="contrato">
                    {{ contrato }}
                  </mat-option>
                </mat-autocomplete>
                <input type="hidden" formControlName="numeroContrato" />
              </mat-form-field>
              <button
                mat-button
                type="button"
                color="primary"
                class="busqueda--img"
                style="margin-bottom: 0 !important; padding-top: 0 !important; padding-bottom: 0 !important"
              >
                <img src="assets/img/icon/lupa.svg" alt="Buscar" />
              </button>
            </div>
          </div>
        </div>
      </div>
      <!-- <div class="row">
        <div class="col-md-12">
          <div class="row">
            <div class="pr-1">
              <label class="label-left" for="nombreContratista" [class.color-secondaryColor]="
                  addressForm.get('nombreContratista').invalid && addressForm.get('nombreContratista').touched
                ">
                Nombre del contratista
              </label>
            </div>
            <div class="col">
              <mat-form-field class="select-width">
                <mat-select formControlName="nombreContratista">
                  <mat-option *ngFor="let tipoFicha of listaTipoFicha" [value]="tipoFicha.value">
                    {{ tipoFicha.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div> -->
      <!--   <div class="row">
        <div class="col-md-12">
          <div class="row">
            <div class="pr-1">
              <label class="label-left" for="departamento" [class.color-secondaryColor]="
                  addressForm.get('departamento').invalid && addressForm.get('departamento').touched
                ">
                Departamento
              </label>
            </div>
            <div class="col">
              <mat-form-field class="select-width">
                <mat-select formControlName="departamento">
                  <mat-option *ngFor="let tipoFicha of listaTipoFicha" [value]="tipoFicha.value">
                    {{ tipoFicha.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div> 
      <div class="row">
        <div class="col-md-12">
          <div class="row">
            <div class="pr-1">
              <label class="label-left" for="municipio" [class.color-secondaryColor]="
                  addressForm.get('municipio').invalid && addressForm.get('municipio').touched
                ">
                Municipio
              </label>
            </div>
            <div class="col">
              <mat-form-field class="select-width">
                <mat-select formControlName="municipio">
                  <mat-option *ngFor="let tipoFicha of listaTipoFicha" [value]="tipoFicha.value">
                    {{ tipoFicha.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="row">
            <div class="pr-1">
              <label class="label-left" for="institucionEducativa" [class.color-secondaryColor]="
                  addressForm.get('institucionEducativa').invalid && addressForm.get('institucionEducativa').touched
                ">
                Institución Educativa
              </label>
            </div>
            <div class="col">
              <mat-form-field class="select-width">
                <mat-select formControlName="institucionEducativa">
                  <mat-option *ngFor="let tipoFicha of listaTipoFicha" [value]="tipoFicha.value">
                    {{ tipoFicha.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="row">
            <div class="pr-1">
              <label class="label-left" for="dede" [class.color-secondaryColor]="
                  addressForm.get('dede').invalid && addressForm.get('dede').touched
                ">
                Sede
              </label>
            </div>
            <div class="col">
              <mat-form-field class="select-width">
                <mat-select formControlName="dede">
                  <mat-option *ngFor="let tipoFicha of listaTipoFicha" [value]="tipoFicha.value">
                    {{ tipoFicha.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div> -->
      <!-- <div class="row">
        <div class="col-md-12">
          <div class="row">
            <div class="pr-1">
              <label class="label-left" for="tipoContrato" [class.color-secondaryColor]="
                  addressForm.get('tipoContrato').invalid && addressForm.get('tipoContrato').touched
                ">
                Tipo de contrato
              </label>
            </div>
            <div class="col">
              <mat-form-field class="select-width">
                <mat-select formControlName="tipoContrato">
                  <mat-option *ngFor="let tipoFicha of listaTipoFicha" [value]="tipoFicha.value">
                    {{ tipoFicha.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div> -->
      <!-- <div class="row">
        <div class="col-md-12">
          <div class="row">
            <div class="pr-1">
              <label class="label-left" for="vigenciaContratación" [class.color-secondaryColor]="
                  addressForm.get('vigenciaContratación').invalid && addressForm.get('vigenciaContratación').touched
                ">
                Vigencia de la contratación
              </label>
            </div>
            <div class="col">
              <mat-form-field class="select-width">
                <mat-select formControlName="vigenciaContratación">
                  <mat-option *ngFor="let tipoFicha of listaTipoFicha" [value]="tipoFicha.value">
                    {{ tipoFicha.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div> -->
    </mat-card-content>
    <mat-card-actions class="text-center">
      <button
        mat-button
        color="primary"
        class="btn-buscar btn-borrar"
        type="button"
        (click)="reiniciarFiltro()"
        [disabled]="!addressForm.get('numeroContrato').value"
      >
        <img src="assets/img/icon/borrar.svg" alt="buscar" />
      </button>

      <button mat-button color="primary" class="btn-buscar" type="submit">
        <img src="assets/img/icon/lupa.svg" alt="buscar" />
        Buscar
      </button>
    </mat-card-actions>
  </mat-card>
</form>

<div class="animatedDown" *ngIf="verResultados && resultados">
  <app-tabla-resultados (morstrarFicha)="verFicha($event)" [resultados]="resultados"></app-tabla-resultados>
</div>
<div class="animatedDown" *ngIf="mostrarFicha && indicadores != null">
  <app-menu-ficha [indicadores]="indicadores"></app-menu-ficha>
</div>
