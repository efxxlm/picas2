<section class="container">
    <div class="text-right">
        <a routerLink="/comiteFiduciario" mat-button color="primary" class="btn-regresar">
            <img src="assets/img/icon/regresar.svg" alt="Regresar">
        </a>
    </div>
    <div class="text-center">
        <h1 class="title-menu--h1">
            Crear acta {{ objetoComiteTecnico.numeroComite }}
        </h1>
    </div>
    <p><b class="sub-text flex-date">{{ objetoComiteTecnico.fechaOrdenDia | date: 'dd/MM/yyyy' }}</b></p>
    <mat-card class="shipping-card">
        <mat-card-header class="header-card">
            <mat-card-title class="header-card--text">
                Miembros participantes
            </mat-card-title>
        </mat-card-header>
        <mat-card-content class="colorMainColor">
            {{ nombresParticipantes }}
        </mat-card-content>
    </mat-card>
    <div class="text-center">
        <p class="info-container">
            <span class="info-text sin-diligenciar">Sin diligenciar</span>
            <span class="info-text en-proceso">En proceso</span>
            <span class="info-text completo">Completo</span>
        </p>
    </div>

    <mat-accordion>
        <mat-expansion-panel class="expansion-style">
            <mat-expansion-panel-header class="expansion-style--header">
                <mat-panel-title class="expansion-style--title"
                        [class.en-proceso]="!solicitudesCompletas"
                        [class.completo]="solicitudesCompletas">
                    Validaci√≥n de solicitudes contractuales
                </mat-panel-title>
            </mat-expansion-panel-header>

            <mat-accordion *ngFor="let sesionComiteSolicitud of objetoComiteTecnico.sesionComiteSolicitudComiteTecnicoFiduciario">
                <mat-expansion-panel class="expansion-style sub-expansion">
                    <mat-expansion-panel-header class="expansion-style--header">
                        <mat-panel-title class="expansion-style--title "
                        [class.sin-diligenciar]="sesionComiteSolicitud.sesionComiteSolicitudId == 0"
                        [class.en-proceso]="!sesionComiteSolicitud.registroCompletoFiduciaria"
                        [class.completo]="sesionComiteSolicitud.registroCompletoFiduciaria"
                        >
                            Solicitud {{ sesionComiteSolicitud.numeroSolicitud }}
                        </mat-panel-title>
                    </mat-expansion-panel-header>

                    <button 
                        (click)="Solicitud.cargarRegistro()"
                        style="display: none;"
                        id="btnSolicitud"
                        name="btnSolicitud"
                    >
                    </button>
                    
                    <app-form-solicitud
                        #Solicitud 
                        [sesionComiteSolicitud]="sesionComiteSolicitud"
                        [listaMiembros]="objetoComiteTecnico.sesionParticipante"
                        [fechaMaxima]="objetoComiteTecnico.fechaOrdenDia"
                        (validar)="habilitar($event)"
                        [style.pointer-events]="getStyle()"
                    >

                    </app-form-solicitud>
                </mat-expansion-panel>
            </mat-accordion>

        </mat-expansion-panel>
        <mat-expansion-panel class="expansion-style">
            <mat-expansion-panel-header class="expansion-style--header">
                <mat-panel-title class="expansion-style--title"
                        [class.en-proceso]="!temasCompletos"
                        [class.completo]="temasCompletos">
                    Otros temas
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-accordion *ngFor="let tema of listaTemas; let i = index">
                <mat-expansion-panel class="expansion-style sub-expansion">
                    <mat-expansion-panel-header class="expansion-style--header">
                        <mat-panel-title class="expansion-style--title" 
                        [class.sin-diligenciar]="tema.sesionTemaId == 0"
                        [class.en-proceso]="!tema.registroCompleto"
                        [class.completo]="tema.registroCompleto"
                        >
                            Tema {{ i + 1 }}
                        </mat-panel-title>
                    </mat-expansion-panel-header>

                    <button 
                        (click)="otros.cargarRegistro()"
                        style="display: none;"
                        id="btnOtros"
                        name="btnOtros"
                        
                    >
                    </button>

                    <app-form-otros-temas
                        #otros
                        [sesionComiteTema]="tema"
                        [listaMiembros]="objetoComiteTecnico.sesionParticipante"
                        (validar)="habilitar($event)"
                        [style.pointer-events]="getStyle()"
                    >
                </app-form-otros-temas>
                </mat-expansion-panel>
            </mat-accordion>

        </mat-expansion-panel>
        <mat-expansion-panel class="expansion-style">
            <mat-expansion-panel-header class="expansion-style--header">
                <mat-panel-title class="expansion-style--title"
                        [class.en-proceso]="!proposicionesCompletos"
                        [class.completo]="proposicionesCompletos">
                    Proposiciones y varios
                </mat-panel-title>
            </mat-expansion-panel-header>

            <mat-accordion *ngFor="let tema of listaProposiciones; let i = index">
                <mat-expansion-panel class="expansion-style sub-expansion">
                    <mat-expansion-panel-header class="expansion-style--header">
                        <mat-panel-title class="expansion-style--title"
                        [class.sin-diligenciar]="tema.sesionTemaId == 0"
                        [class.en-proceso]="!tema.registroCompleto"
                        [class.completo]="tema.registroCompleto"
                        >
                            Tema {{ i + 1 }}
                        </mat-panel-title>
                    </mat-expansion-panel-header>

                    <button 
                        (click)="proposiciones.cargarRegistro()"
                        style="display: none;"
                        id="btnProposiciones"
                        name="btnProposiciones"
                    >
                    </button>
                    
                    <app-form-otros-temas
                        #proposiciones
                        [sesionComiteTema]="tema"
                        [listaMiembros]="objetoComiteTecnico.sesionParticipante"
                        (validar)="habilitar($event)"
                        [style.pointer-events]="getStyle()"
                    >
                     </app-form-otros-temas>
                </mat-expansion-panel>
            </mat-accordion>

        </mat-expansion-panel>
    </mat-accordion>
    <div class="d-flex align-items-center" *ngIf="objetoComiteTecnico.estadoActaCodigo == '4'">
        <div class="text-area-quill">
            <label class="text-area-quill--label">Comentarios al acta</label>
            <app-tabla-comentarios-acta [data]="listaComentarios"></app-tabla-comentarios-acta>
        </div>

    </div>
</section>