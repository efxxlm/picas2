<div class="table-responsive">
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
        <ng-container matColumnDef="faseContrato">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fase del contrato </th>
            <td mat-cell *matCellDef="let element" align="center"> <b>{{ element.faseContrato }}</b> </td>
        </ng-container>
        <ng-container matColumnDef="pagosRealizados">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Pagos Realizados </th>
            <td mat-cell *matCellDef="let element" align="center"> {{ element.pagosRealizados }} </td>
        </ng-container>
        <ng-container matColumnDef="valorFacturado">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Valor facturado </th>
            <td mat-cell *matCellDef="let element" align="center"> {{ element.valorFacturado }} </td>
        </ng-container>
        <ng-container matColumnDef="porcentajeFacturado">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Porcentaje facturado </th>
            <td mat-cell *matCellDef="let element" align="center"> {{ element.porcentajeFacturado }} </td>
        </ng-container>
        <ng-container matColumnDef="saldoPorPagar">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Saldo por pagar </th>
            <td mat-cell *matCellDef="let element" align="center"> {{ element.saldoPorPagar }} </td>
        </ng-container>
        <ng-container matColumnDef="porcentajePorPagar">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Porcentaje por pagar </th>
            <td mat-cell *matCellDef="let element" align="center"> {{ element.porcentajePorPagar }} </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <!--<mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>-->
</div>
<form [formGroup]="addressForm" novalidate (ngSubmit)="onSubmit()">
    <mat-card class="shipping-card" style="margin-top: 3em;">
        <mat-card-header class="header-card header-card--margin">
            <mat-card-title class="header-card--text">
                Registro
            </mat-card-title>
        </mat-card-header>
        <mat-card-content style="text-align: left;">
            <div class="row">
                <div class="col-md-8">
                    <div class="row">
                        <div class="pr-1">
                            <label class="label-left" for="fechaSolicitud">Fecha de solicitud</label>
                        </div>
                        <div class="col d-flex align-items-center">
                            <mat-form-field class="example-full-width">
                                <input matInput formControlName="fechaSolicitud" [matDatepicker]="pickerFechaRevision"
                                    readonly (click)="pickerFechaRevision.open()" required placeholder="DD/MM/AAAA">
                                <mat-datepicker #pickerFechaRevision></mat-datepicker>
                            </mat-form-field>
                            <button mat-button color="primary" type="button" (click)="pickerFechaRevision.open()"
                                class="btn-calendario">
                                <img src="assets/img/icon/calendarioCirculo.svg" alt="Abrir Calendario">
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-8">
                    <div class="row">
                        <div class="pr-1">
                            <label for="numeroRadicado" class="label-left">Número de radicado</label>
                        </div>
                        <div class="col d-flex">
                            <mat-form-field class="full-width">
                                <input matInput #numeroRadicado type="text" maxlength="10"
                                    formControlName="numeroRadicado" required>
                            </mat-form-field>
                            <span class="contador">{{10 - numeroRadicado.value.length}}</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-8">
                    <div class="row">
                        <div class="pr-1">
                            <label class="label-left" for="faseContrato">Fase del contrato</label>
                        </div>
                        <div class="col">
                            <mat-form-field class="select-width">
                                <mat-select formControlName="faseContrato" multiple required (selectionChange)="getvalues($event.value)">
                                    <mat-option *ngFor="let faseContrato of fasesArray" [value]="faseContrato">
                                        {{ faseContrato.name }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </div>
        </mat-card-content>
    </mat-card>
    <div class="text-center mb-2em">
        <button mat-button color="warn" class="btn-guardar" type="submit">
            <img src="assets/img/icon/guardar.svg" alt="Regresar">
        </button>
    </div>
</form>
<div *ngIf="this.obj1==true">
    <mat-accordion>
        <mat-expansion-panel class="expansion-style sub-expansion">
            <mat-expansion-panel-header class="expansion-style--header">
                <mat-panel-title class="expansion-style--title sin-diligenciar">
                    Fase 1 - Preconstrucción
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-accordion>
                <mat-expansion-panel class="expansion-style sub-expansion-black">
                    <mat-expansion-panel-header class="expansion-style--header">
                        <mat-panel-title class="expansion-style--title sin-diligenciar">
                            Criterios de pago incluidos en la factura
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <app-form-criterios-pago></app-form-criterios-pago>
                </mat-expansion-panel>
                <mat-expansion-panel class="expansion-style sub-expansion-black">
                    <mat-expansion-panel-header class="expansion-style--header">
                        <mat-panel-title class="expansion-style--title sin-diligenciar">
                            Amortización del anticipo
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <app-form-amortizacion-anticipo></app-form-amortizacion-anticipo>
                </mat-expansion-panel>
                <mat-expansion-panel class="expansion-style sub-expansion-black">
                    <mat-expansion-panel-header class="expansion-style--header">
                        <mat-panel-title class="expansion-style--title sin-diligenciar">
                            Detalle factura para proyectos asociados
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <app-detalle-factura-proyectos-asociados></app-detalle-factura-proyectos-asociados>
                </mat-expansion-panel>
                <mat-expansion-panel class="expansion-style sub-expansion-black">
                    <mat-expansion-panel-header class="expansion-style--header">
                        <mat-panel-title class="expansion-style--title sin-diligenciar">
                            Datos de la factura
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <app-form-datos-factura></app-form-datos-factura>
                </mat-expansion-panel>
                <div style="margin-top: 1em;">
                    <div class="d-flex align-items-center solbloq ml8 info-text en-alertaLibre mb-2em">
                        Los acordeones se habilitarán de forma secuencial, una vez se tenga completa la información de la
                        sección anterior
                    </div>
                </div>
            </mat-accordion>
        </mat-expansion-panel>
    </mat-accordion>
</div>
<div *ngIf="this.obj2==true">
    <mat-accordion>
        <mat-expansion-panel class="expansion-style sub-expansion">
            <mat-expansion-panel-header class="expansion-style--header">
                <mat-panel-title class="expansion-style--title sin-diligenciar">
                    Fase 2 - Construcción
                </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-accordion>
                <mat-expansion-panel class="expansion-style sub-expansion-black">
                    <mat-expansion-panel-header class="expansion-style--header">
                        <mat-panel-title class="expansion-style--title sin-diligenciar">
                            Criterios de pago incluidos en la factura
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <app-form-criterios-pago></app-form-criterios-pago>
                </mat-expansion-panel>
                <mat-expansion-panel class="expansion-style sub-expansion-black">
                    <mat-expansion-panel-header class="expansion-style--header">
                        <mat-panel-title class="expansion-style--title sin-diligenciar">
                            Detalle factura para proyectos asociados
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <app-detalle-factura-proyectos-asociados></app-detalle-factura-proyectos-asociados>
                </mat-expansion-panel>
                <mat-expansion-panel class="expansion-style sub-expansion-black">
                    <mat-expansion-panel-header class="expansion-style--header">
                        <mat-panel-title class="expansion-style--title sin-diligenciar">
                            Datos de la factura
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <app-datos-factura-construccion-rvrp></app-datos-factura-construccion-rvrp>
                </mat-expansion-panel>
                <div style="margin-top: 1em;">
                    <div class="d-flex align-items-center solbloq ml8 info-text en-alertaLibre mb-2em">
                        Los acordeones se habilitarán de forma secuencial, una vez se tenga completa la información de la
                        sección anterior
                    </div>
                </div>
            </mat-accordion>
        </mat-expansion-panel>
    </mat-accordion>
</div>
<mat-accordion>
    <mat-expansion-panel class="expansion-style sub-expansion">
        <mat-expansion-panel-header class="expansion-style--header">
            <mat-panel-title class="expansion-style--title sin-diligenciar">
                Descuentos Dirección Técnica
            </mat-panel-title>
        </mat-expansion-panel-header>
        <app-form-descuentos-direccion-tecnica></app-form-descuentos-direccion-tecnica>
    </mat-expansion-panel>
</mat-accordion>
<mat-accordion>
    <mat-expansion-panel class="expansion-style sub-expansion">
        <mat-expansion-panel-header class="expansion-style--header">
            <mat-panel-title class="expansion-style--title sin-diligenciar">
                Soporte de la solicitud
            </mat-panel-title>
        </mat-expansion-panel-header>
        <app-form-soporte-solicitud-url></app-form-soporte-solicitud-url>
    </mat-expansion-panel>
</mat-accordion>