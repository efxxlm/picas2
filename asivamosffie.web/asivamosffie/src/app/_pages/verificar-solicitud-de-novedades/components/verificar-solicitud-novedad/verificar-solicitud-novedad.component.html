<section class="container">
  <div class="container text-center">
    <div class="text-right">
      <a routerLink="../.." mat-button color="primary" class="btn-regresar">
        <img src="assets/img/icon/regresar.svg" alt="Regresar">
      </a>
    </div>
    <h1 class="title-menu--h1">
      Verificar solicitud de novedad NOV-001
    </h1>
    <p class="info-sub-title">
      Número de contrato <b>A887654344</b>
    </p>
  </div>

  <mat-card class="shipping-card var-main-gris">
    <mat-card-header class="header-card header-card--margin">
      <mat-card-title class="header-card--text">
        Datos del contrato
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <p>
        <strong>
          Nombre del contratista:
        </strong>
        Constructora Colpatria SAS
      </p>
      <p>
        <strong>
          Tipo de identificación:
        </strong>
        NIT
      </p>
      <p>
        <strong>
          Número de identificación:
        </strong>
        900.879.989
      </p>
      <p>
        <strong>
          Tipo de intervención:
        </strong>
        Remodelación
      </p>
      <p>
        <strong>
          Valor del contrato:
        </strong>
        $ 130.000.000
      </p>
      <p>
        <strong>
          Plazo:
        </strong>
        24 meses / 25 días
      </p>
      <p>
        <strong>
          Fecha de inicio de contrato:
        </strong>
        25/06/2020
      </p>
      <p>
        <strong>
          Fecha de finalización de contrato:
        </strong>
        20/07/2022
      </p>

      <h2 class="card-subTitle">Proyecto asociado</h2>
      <p>
        <strong>
          Llave MEN:
        </strong>
        LY886643
      </p>
      <p>
        <strong>
          Departamento:
        </strong>
        Antioquia
      </p>
      <p>
        <strong>
          Municipio:
        </strong>
        Bello
      </p>
      <p>
        <strong>
          Institución educativa:
        </strong>
        I.E. José Cuervo
      </p>
      <p>
        <strong>
          Sede:
        </strong>
        Única sede
      </p>
    </mat-card-content>
  </mat-card>

  <mat-accordion>
    <mat-expansion-panel class="expansion-style">
      <mat-expansion-panel-header class="expansion-style--header">
        <mat-panel-title class="expansion-style--title">
          Registrar novedad
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-card class="shipping-card var-main-gris" *ngIf="false">
        <mat-card-content>
          <p>
            <strong>
              Instancia donde se presentó la solicitud:
            </strong>
            Comité de obra
          </p>
          <p>
            <strong>
              Fecha de la sesión de la instancia:
            </strong>
            12/10/2020
          </p>
          <p>
            <strong>
              Tipo de Novedad:
            </strong>
            Modificación de Condiciones Contractuales
          </p>
          <p>
            <strong>
              Motivos de la novedad:
            </strong>
            Otra
          </p>
          <p>
            <strong>
              Resumen de la justificación de la novedad:
            </strong>
            <span class="d-block">
              Es necesario ajustar la cantidad de reportes para llevar un control interno y evaluaciar el avance en el
              cronograma de la obra.
            </span>
          </p>
          <p>
            <strong>
              Cláusula a modificar 1:
            </strong>
            <span class="d-block">
              Claúsula 5.2. Periodo de informes.
            </span>
          </p>
          <p>
            <strong>
              Ajuste solicitado a la cláusula 1:
            </strong>
            <span class="d-block">
              El contratista debe entregar un reporte mensual con pruebas físicas del avance de la obra.
            </span>
          </p>
          <p>
            <strong>
              Cláusula a modificar 2:
            </strong>
            <span class="d-block">
              Claúsula 5.1. Responsable de informes.
            </span>
          </p>
          <p>
            <strong>
              Ajuste solicitado a la cláusula 2:
            </strong>
            <span class="d-block">
              El Contratista es el responsable de enviar los informes con los respectivios soportes físicos.
            </span>
          </p>
          <p>
            <strong>
              ¿Cuenta con la documentación soporte suficiente? :
            </strong>
            Sí
          </p>
          <p>
            <strong>
              Concepto técnico:
            </strong>
            <span class="d-block">
              Se considera necesario el reporte mensual para evaluar el avance de la obra.
            </span>
          </p>
          <p>
            <strong>
              Fecha concepto técnico:
            </strong>
            30/10/2020
          </p>
          <p>
            <strong>
              Número de radicado en FFIE de solicitud:
            </strong>
            NR-N54344-001
          </p>
        </mat-card-content>
      </mat-card>

      <mat-card class="shipping-card var-main-gris" *ngIf="true">
        <mat-card-content>
          <p>
            <strong>
              Fecha de solicitud de la novedad:
            </strong>
            17/10/2020
          </p>
          <p>
            <strong>
              Instancia donde se presentó la solicitud:
            </strong>
            No aplica
          </p>
          <p>
            <strong>
              Tipo de Novedad:
            </strong>
            Suspensión
          </p>
          <p>
            <strong>
              Motivos de la novedad:
            </strong>
            Otra
          </p>
          <p>
            <strong>
              Resumen de la justificación de la novedad:
            </strong>
            <span class="d-block">
              Es necesario ajustar la cantidad de reportes para llevar un control interno y evaluaciar el avance en el
              cronograma de la obra.
            </span>
          </p>
          <p>
            <strong>
              Motivos de la novedad:
            </strong>
            <span class="d-block">
              Desastres naturales
            </span>
          </p>

          <mat-card-title class="header-card--text sub-text">
            Datos del contrato
          </mat-card-title>
          <p>
            <strong>
              Plazo solicitado
            </strong>
              01/12/2020
          </p>
          <p>
            <strong>
              Fecha final de la suspensión:
            </strong>
            03/02/2020
          </p>
          <p>
            <strong>
              ¿Cuenta con la documentación soporte suficiente?:
            </strong>
            Sí
          </p>
          <p>
            <strong>
              Concepto técnico
            </strong>
            <span class="d-block">
              Se evalúa la documentación y se evidencia que se requiere generar la novedad contractual por la calamidad presentada.
            </span>
          </p>
          <p>
            <strong>
              Concepto técnico:
            </strong>
            <span class="d-block">
              Se considera necesario el reporte mensual para evaluar el avance de la obra.
            </span>
          </p>
          <p>
            <strong>
              Fecha concepto técnico:
            </strong>
            20/10/2020
          </p>
          <p>
            <strong>
              Número de radicado en FFIE de solicitud:
            </strong>
            NR-N54344-001
          </p>
        </mat-card-content>
      </mat-card>

    </mat-expansion-panel>
    <mat-expansion-panel class="expansion-style">
      <mat-expansion-panel-header class="expansion-style--header">
        <mat-panel-title class="expansion-style--title ">
          Soporte de la solicitud
        </mat-panel-title>
      </mat-expansion-panel-header>

      <mat-card class="shipping-card var-main-gris">
        <mat-card-header class="header-card header-card--margin">
          <mat-card-title class="header-card--text">
            Soporte del registro del proceso
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <p>
            <strong>
              URL con soporte:
            </strong>
            https://drive.google.com/drive/registrodecontroversiacontractual/registrosolicituddenovedad
          </p>
        </mat-card-content>
      </mat-card>

    </mat-expansion-panel>
  </mat-accordion>

  <form [formGroup]="addressForm" novalidate (ngSubmit)="onSubmit()">
    <div class="row justify-content-center mt-2em">
      <div class="pr-1">
        <label class="label-left" for="tieneObservaciones" [class.color-secondaryColor]="
            addressForm.get('tieneObservaciones').invalid && addressForm.get('tieneObservaciones').touched ||
            addressForm.get('tieneObservaciones').invalid && estaEditando">
          ¿Tiene observaciones a la solicitud de novedad?
        </label>
      </div>
      <div>
        <mat-radio-group class="radioInput" formControlName="tieneObservaciones">
          <mat-radio-button [value]="true">Sí</mat-radio-button>
          <mat-radio-button [value]="false">No</mat-radio-button>
        </mat-radio-group>
        <span class="required-form-group m-0">*</span>
      </div>
    </div>

    <div class="d-flex mt-2em align-items-center animatedDown"
      *ngIf="addressForm.get('tieneObservaciones').value === true">
      <div class="text-area-quill" [class.color-secondaryColor]="
      addressForm.get('observaciones').invalid && addressForm.get('observaciones').touched ||
      addressForm.get('observaciones').invalid && estaEditando">
        <label class="text-area-quill--label align-left-label" [class.colorMainColor]="
                  !(addressForm.get('observaciones').invalid && addressForm.get('observaciones').touched ||
                  addressForm.get('observaciones').invalid && estaEditando)">
          Observaciones a la solicitud de novedad
        </label>
        <quill-editor class="quill-editor-style ml-1em" [styles]="editorStyle" [modules]="config"
          (onContentChanged)="maxLength($event, 1000)" formControlName="observaciones" required>
        </quill-editor>
      </div>
      <span class="contador miles" *ngIf="addressForm.get('observaciones').value">
        {{1000 - (textoLimpio(addressForm.get('observaciones').value)>1000?1000:textoLimpio(addressForm.get('observaciones').value))}}
      </span>
      <span class="contador miles" *ngIf="!addressForm.get('observaciones').value">
        1000
      </span>
    </div>
    <div class="text-center mb-2em">
      <button mat-button color="warn" class="btn-guardar" type="submit" [disabled]="
        addressForm.get('tieneObservaciones').invalid ||
        addressForm.get('tieneObservaciones').value === true && addressForm.get('observaciones').invalid">
        <img src="assets/img/icon/guardar.svg" alt="Regresar">
      </button>
    </div>
  </form>

  <div *ngIf="false" class="mb-2em">
    <table class="mat-table cdk-table mat-sort mat-table-style table-form table-form--2 table-gris">
      <thead>
        <tr class="mat-header-row cdk-header-row ng-star-inserted">
          <th class="mat-header-cell cdk-header-cell ng-star-inserted">
            Fecha de revisión
          </th>
          <th class="mat-header-cell cdk-header-cell ng-star-inserted">
            Responsable de la observación
          </th>
          <th class="mat-header-cell cdk-header-cell ng-star-inserted">
            Historial de observaciones
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let observacion of listaObservaciones">
          <td class="mat-cell cdk-cell ng-star-inserted">
            {{ observacion.fecha }}
          </td>
          <td class="mat-cell cdk-cell ng-star-inserted">
            {{ observacion.responsable }}
          </td>
          <td class="mat-cell cdk-cell ng-star-inserted">
            {{ observacion.historial }}
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</section>
