<div class="container" *ngIf="acta !== undefined">

  <div class="text-right">
    <a routerLink="/compromisosActasComite" mat-button color="primary" class="btn-regresar">
      <img src="assets/img/icon/regresar.svg" alt="Regresar">
    </a>
  </div>

  <div class="text-center">
    <h1 class="title-menu--h1">
      Revisar acta {{ acta.numeroComite }}
    </h1>
  </div>
  
  <div class="text-center mr-1">
    <span> <b>{{ acta.fechaComite }}</b> </span>
  </div>

  <section class="container">
    <mat-card class="mt-2em">
        <mat-card-header class="header-card">
            <mat-card-title class="header-card--text">
              Miembros participantes
            </mat-card-title>
        </mat-card-header>
        <mat-card-content class="colorMainColor">
          <div class="d-flex">
            <p *ngFor="let participante of miembrosParticipantes; let i = index" class="ml-min"> {{ participante }}<span *ngIf="i < miembrosParticipantes.length-1">,</span><span *ngIf="i === miembrosParticipantes.length-1">.</span></p>
          </div>
        </mat-card-content>
    </mat-card>
    <div class="text-center">
        <p class="info-container">
          <span class="info-text sin-diligenciar">Sin diligenciar</span>
          <span class="info-text en-proceso">En proceso</span>
          <span class="info-text completo">Completo</span>
        </p>
    </div>

    <mat-accordion>
      <mat-expansion-panel class="expansion-style">
        <mat-expansion-panel-header class="expansion-style--header">
          <mat-panel-title class="expansion-style--title completo">
            Validaci√≥n de solicitudes contractuales
          </mat-panel-title>
        </mat-expansion-panel-header>

        <mat-accordion>
          <mat-expansion-panel class="expansion-style sub-expansion">
            <mat-expansion-panel-header class="expansion-style--header">
                <mat-panel-title class="expansion-style--title completo sub-expansion">
                  <b>Solicitud PI0004</b>
                </mat-panel-title>
            </mat-expansion-panel-header>
  
            <app-form-solicitud></app-form-solicitud>

          </mat-expansion-panel>
        </mat-accordion>

      </mat-expansion-panel>

      <mat-expansion-panel class="expansion-style">
        <mat-expansion-panel-header class="expansion-style--header">
          <mat-panel-title class="expansion-style--title en-proceso">
            Otros temas
          </mat-panel-title>
        </mat-expansion-panel-header>

        <mat-accordion *ngFor="let tema of temas; let i = index">
          <mat-expansion-panel class="expansion-style sub-expansion">
            <mat-expansion-panel-header class="expansion-style--header">
                <mat-panel-title class="expansion-style--title sub-expansion">
                  <b>Tema {{ i+1 }} </b>
                </mat-panel-title>
            </mat-expansion-panel-header>

            <div align="left">
              <mat-card class="border">
                <mat-card-content>
                  <h2 class="card-subTitle back-color">Desarrollo</h2>
                  <p><b>Tema</b>: {{ tema.tema }} </p>
                  <p><b>Responsable</b>: </p>
                  <p><b>Observaciones</b>: {{ textoLimpioMessage( tema.observaciones ) }} </p>
                  <h2 class="card-subTitle back-color">Decisiones</h2>
                  <p><b>Estado de la solicitud</b>: </p>
                  <p><b>Observaciones</b>: {{ textoLimpioMessage( tema.observacionesDecision ) }} </p>
                </mat-card-content>
              </mat-card>
            </div>

          </mat-expansion-panel>
        </mat-accordion>

      </mat-expansion-panel>

      <mat-expansion-panel class="expansion-style">
        <mat-expansion-panel-header class="expansion-style--header">
          <mat-panel-title class="expansion-style--title sin-diligenciar">
            Proposiciones y varios
          </mat-panel-title>
        </mat-expansion-panel-header>

        <mat-accordion *ngFor="let tema of proposicionesVarios; let i = index">
          <mat-expansion-panel class="expansion-style sub-expansion">
            <mat-expansion-panel-header class="expansion-style--header">
                <mat-panel-title class="expansion-style--title sub-expansion">
                  <b>Tema {{ i+1 }} </b>
                </mat-panel-title>
            </mat-expansion-panel-header>

            <div align="left">
              <mat-card class="border">
                <mat-card-content>
                  <h2 class="card-subTitle back-color">Desarrollo</h2>
                  <p><b>Tema</b>: {{ tema.tema }} </p>
                  <p><b>Responsable</b>: </p>
                  <p><b>Observaciones</b>: {{ textoLimpioMessage( tema.observaciones ) }} </p>
                  <h2 class="card-subTitle back-color">Decisiones</h2>
                  <p><b>Estado de la solicitud</b>: </p>
                  <p><b>Observaciones</b>: {{ textoLimpioMessage( tema.observacionesDecision ) }} </p>
                </mat-card-content>
              </mat-card>
            </div>

          </mat-expansion-panel>
        </mat-accordion>

      </mat-expansion-panel>
    </mat-accordion>
</section>

<div class="tabs--actions mt-2">
  <button mat-raised-button 
          color="accent" 
          class="tabs--btn"
          (click)="aprobarActa( acta.comiteTecnicoId )">
          Aprobar acta
  </button>
  <button mat-raised-button 
          color="accent" 
          class="tabs--btn" 
          (click)="comentarActa = !comentarActa">
          Comentar y devolver acta
  </button>
  <button mat-raised-button 
          color="accent" 
          class="tabs--btn"
          (click)="getActaPdf( acta.comiteTecnicoId, acta.numeroComite )">
          Descargar acta preliminar
  </button>
</div>

<div *ngIf="comentarActa">
  <form autocomplete="off" [formGroup]="form" (ngSubmit)="onSubmit()">

    <div class="d-flex align-items-center">
      <div class="text-area-quill">
        <label for="justificacion" class="text-area-quill--label">Comentarios al acta</label>
        <p class="padding-p">Fecha: <b class="text-color">26/06/2020</b></p>
        <quill-editor class="quill-editor-style card" format="text" [styles]="editorStyle" [modules]="config"
        (onContentChanged)="maxLength($event, 1000)" formControlName="comentarioActa" required></quill-editor>
      </div>
      <span class="contador" *ngIf="form.get('comentarioActa').value !== null">
        {{500 - textoLimpio(form.get('comentarioActa').value)}}
      </span>
      <span class="contador" *ngIf="form.get('comentarioActa').value === null">
        500
      </span>
    </div>

    <div class="text-center">

      <button mat-button 
              color="warn" 
              class="btn-guardar mr-bottom-2" 
              type="submit">
              <img  src="assets/img/icon/guardar.svg" 
                    alt="Guardar">
      </button>
    </div>

  </form>
</div>

</div>
